# ITS Camera AI - Docker Environment Configuration
# Copy this file to .env.docker and configure for your deployment

# =============================================================================
# DEPLOYMENT CONFIGURATION
# =============================================================================

# Environment (development|staging|production)
NODE_ENV=production
ENVIRONMENT=production

# =============================================================================
# FRONTEND CONFIGURATION
# =============================================================================

# Next.js Configuration
NEXTAUTH_URL=https://your-domain.com
NEXTAUTH_SECRET=your-very-secure-nextauth-secret-here

# API Endpoints
NEXT_PUBLIC_API_URL=https://api.your-domain.com
NEXT_PUBLIC_WS_URL=wss://api.your-domain.com/ws
NEXT_PUBLIC_API_BASE_URL=http://nginx:80

# External Services
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
ANALYTICS_ID=G-XXXXXXXXXX

# Security
SECURE_COOKIES=true
CSP_ENABLED=true

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL
POSTGRES_PASSWORD=your-secure-postgres-password
POSTGRES_DB=its_camera_ai_prod
POSTGRES_USER=its_camera_ai_prod

# Connection Pool Settings
DATABASE_URL=postgresql+asyncpg://its_camera_ai_prod:your-secure-postgres-password@postgres:5432/its_camera_ai_prod

# =============================================================================
# CACHE AND SESSION STORE
# =============================================================================

# Redis Configuration
REDIS_MASTER_URL=redis://redis-master:6379/0
REDIS_REPLICA_URL=redis://redis-replica:6379/0

# =============================================================================
# OBJECT STORAGE
# =============================================================================

# MinIO Configuration
MINIO_ROOT_USER=your-minio-access-key
MINIO_ROOT_PASSWORD=your-secure-minio-secret-key
MINIO_BUCKET=its-camera-ai-prod

# =============================================================================
# MESSAGE QUEUE
# =============================================================================

# Kafka Configuration
KAFKA_BOOTSTRAP_SERVERS=kafka1:9092,kafka2:9093

# =============================================================================
# APPLICATION SECURITY
# =============================================================================

# Application Secrets
SECRET_KEY=your-very-secure-application-secret-key
JWT_EXPIRATION_MINUTES=30

# SSL/TLS Configuration
SSL_CERT_PATH=/etc/nginx/ssl/cert.pem
SSL_KEY_PATH=/etc/nginx/ssl/key.pem

# =============================================================================
# MONITORING AND LOGGING
# =============================================================================

# Grafana Configuration
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=your-secure-grafana-password
GRAFANA_SECRET_KEY=your-grafana-secret-key

# Prometheus Configuration
PROMETHEUS_RETENTION_TIME=30d
PROMETHEUS_RETENTION_SIZE=50GB

# =============================================================================
# ML/AI CONFIGURATION
# =============================================================================

# Model Configuration
MODEL_CONFIDENCE_THRESHOLD=0.6
BATCH_SIZE=16
GPU_MEMORY_FRACTION=0.9
MAX_WORKERS=8

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================

# Worker Configuration
WORKER_CONCURRENCY=8

# Database Performance
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30

# =============================================================================
# BACKUP AND DISASTER RECOVERY
# =============================================================================

# Backup Configuration
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=its-camera-ai-backups

# =============================================================================
# DEVELOPMENT OVERRIDES
# =============================================================================
# Uncomment these for development environment

# NODE_ENV=development
# ENVIRONMENT=development
# NEXTAUTH_URL=http://localhost:3000
# NEXT_PUBLIC_API_URL=http://localhost:8000
# NEXT_PUBLIC_WS_URL=ws://localhost:8000/ws
# SECURE_COOKIES=false
# CSP_ENABLED=false

# =============================================================================
# DOCKER COMPOSE CONFIGURATION
# =============================================================================

# Build Configuration
DOCKER_BUILDKIT=1
COMPOSE_PARALLEL_LIMIT=4

# Health Check Configuration
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3

# =============================================================================
# NETWORK CONFIGURATION
# =============================================================================

# Load Balancer Configuration
NGINX_WORKER_PROCESSES=auto
NGINX_WORKER_CONNECTIONS=4096
NGINX_CLIENT_MAX_BODY_SIZE=100M

# Rate Limiting
RATE_LIMIT_LOGIN=5r/m
RATE_LIMIT_API=100r/m
RATE_LIMIT_STATIC=1000r/m